{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let AdminComponent = class AdminComponent {\n  constructor(fApiService, fBuilder, Route, Router) {\n    this.fApiService = fApiService;\n    this.fBuilder = fBuilder;\n    this.Route = Route;\n    this.foodItems = [];\n    this.foodObject = [];\n    this.activeUser = '';\n    this.myFood = this.fBuilder.group({\n      food_name: [''],\n      food_desc: [''],\n      food_price: [''],\n      food_image: []\n    });\n  }\n  ngOnInit() {\n    //call get all foods items\n    this.getAllFood();\n    // get local storage info\n    this.getLocalstorageData();\n  }\n  getLocalstorageData() {\n    this.activeUser = localStorage.getItem('activeUser');\n  }\n  logout() {\n    // user info will remove from localstorage\n    localStorage.clear();\n    // redirect to login\n    this.Route.navigateByUrl('/login');\n  }\n  ngAfterViewInit() {}\n  // set image file\n  setFile(Event) {\n    let file = Event.target.files[0];\n    console.log(file);\n    // set file into myfood\n    this.myFood.get('food_image')?.setValue(file);\n  }\n  // get all foods items\n  getAllFood() {\n    this.fApiService.getAllFoods().subscribe({\n      next: res => {\n        // console.log(res);\n        this.foodItems = res;\n        console.log(this.foodItems);\n      },\n      error: error => {\n        console.log(error);\n      }\n    });\n  }\n  // add new food Items\n  addFood() {\n    // console.log(this.myFood.value);\n    let foodFormData = new FormData();\n    let formData = this.myFood.value;\n    // foodFormData.append('food_name',this.myFood.get('food_name')?.value);\n    // foodFormData.append('food_desc',this.myFood.get('food_desc')?.value);\n    // foodFormData.append('food_price',this.myFood.get('food_price')?.value);\n    // foodFormData.append('food_image',this.myFood.get('food_image')?.value);\n    Object.keys(formData).forEach(keys => {\n      foodFormData.append(keys, formData[keys]);\n    });\n    // console.log(foodFormData);\n    // add food api call\n    this.fApiService.addNewFood(foodFormData).subscribe({\n      next: res => {\n        console.log(res);\n        alert(res.message);\n        // get all food\n        this.getAllFood();\n        // Form reset\n        this.myFood.reset();\n      },\n      error: error => {\n        console.log(error);\n      }\n    });\n  }\n  //set value myFood\n  myFoodSet(f) {\n    console.log(f);\n    this.foodObject = f;\n    // now setting up the value into myfood form\n    this.myFood.get('food_name')?.setValue(this.foodObject.food_name);\n    this.myFood.get('food_desc')?.setValue(this.foodObject.food_desc);\n    this.myFood.get('food_price')?.setValue(this.foodObject.food_price);\n  }\n  // update food item\n  update() {\n    let foodFormData = new FormData();\n    let formData = this.myFood.value;\n    // foodFormData.append('food_name',this.myFood.get('food_name')?.value);\n    // foodFormData.append('food_desc',this.myFood.get('food_desc')?.value);\n    // foodFormData.append('food_price',this.myFood.get('food_price')?.value);\n    // foodFormData.append('food_image',this.myFood.get('food_image')?.value);\n    Object.keys(formData).forEach(keys => {\n      foodFormData.append(keys, formData[keys]);\n    });\n    // console.log(foodFormData);\n    // update api call\n    this.fApiService.updateFood(this.foodObject._id, foodFormData).subscribe({\n      next: res => {\n        console.log(res);\n        // get call food items\n        this.getAllFood();\n        // form reset\n        this.myFood.reset();\n        alert(res.message);\n      },\n      error: error => {\n        console.log(error);\n      }\n    });\n  }\n  // delete\n  delete(_id) {\n    console.log(_id);\n    var conMsg = confirm('Want to delete item?');\n    console.log(conMsg);\n    if (conMsg) {\n      // delete api \n      this.fApiService.deleteFood(_id).subscribe({\n        next: res => {\n          console.log(res);\n          alert(res.message);\n          // get all food\n          this.getAllFood();\n        },\n        error: error => {\n          console.log(error);\n        }\n      });\n    }\n  }\n};\nAdminComponent = __decorate([Component({\n  selector: 'app-admin',\n  templateUrl: './admin.component.html',\n  styleUrls: ['./admin.component.css']\n})], AdminComponent);","map":{"version":3,"names":["Component","AdminComponent","constructor","fApiService","fBuilder","Route","Router","foodItems","foodObject","activeUser","myFood","group","food_name","food_desc","food_price","food_image","ngOnInit","getAllFood","getLocalstorageData","localStorage","getItem","logout","clear","navigateByUrl","ngAfterViewInit","setFile","Event","file","target","files","console","log","get","setValue","getAllFoods","subscribe","next","res","error","addFood","foodFormData","FormData","formData","value","Object","keys","forEach","append","addNewFood","alert","message","reset","myFoodSet","f","update","updateFood","_id","delete","conMsg","confirm","deleteFood","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\User\\OneDrive\\Desktop\\Angular\\Bong_Thali_2024\\src\\app\\pages\\admin\\admin.component.ts"],"sourcesContent":["import { AfterViewInit, Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { Route, Router } from '@angular/router';\nimport { FOOD } from 'src/app/core/Models/food';\nimport { FoodApiService } from 'src/app/core/services/food/food-api.service';\n\n@Component({\n  selector: 'app-admin',\n  templateUrl: './admin.component.html',\n  styleUrls: ['./admin.component.css']\n})\nexport class AdminComponent implements OnInit,AfterViewInit{\n  foodItems:FOOD[]=[];\n  myFood:FormGroup;\n  foodObject:any=[];\n  activeUser:any='';\n  constructor(private fApiService:FoodApiService,private fBuilder:FormBuilder,private Route Router){\n    this.myFood=this.fBuilder.group({\n      food_name:[''],\n      food_desc:[''],\n      food_price:[''],\n      food_image:[]\n    })\n  }\n  ngOnInit(): void {\n    //call get all foods items\n    this.getAllFood();\n     // get local storage info\n     this.getLocalstorageData();\n\n  }\n getLocalstorageData(){\n  this.activeUser=localStorage.getItem('activeUser');\n\n }\n logout(){\n  // user info will remove from localstorage\n  localStorage.clear();\n  // redirect to login\n  this.Route.navigateByUrl('/login');\n }\n  ngAfterViewInit(): void {\n    \n\n  }\n\n\n  // set image file\n  setFile(Event:any){\n    let file=Event.target.files[0];\n    console.log(file);\n    // set file into myfood\n    this.myFood.get('food_image')?.setValue(file);\n\n  }\n  // get all foods items\n  getAllFood(){\n    this.fApiService.getAllFoods().subscribe({\n      next:((res:any)=>{\n        // console.log(res);\n        this.foodItems=res;\n        console.log(this.foodItems);\n      }),\n      error:((error)=>{\n        console.log(error);\n      })\n    })\n  }\n  // add new food Items\n  addFood(){\n    // console.log(this.myFood.value);\n    let foodFormData=new FormData();\n    let formData=this.myFood.value;\n    // foodFormData.append('food_name',this.myFood.get('food_name')?.value);\n    // foodFormData.append('food_desc',this.myFood.get('food_desc')?.value);\n    // foodFormData.append('food_price',this.myFood.get('food_price')?.value);\n    // foodFormData.append('food_image',this.myFood.get('food_image')?.value);\n    Object.keys(formData).forEach((keys:any)=>{\n      foodFormData.append(keys,formData[keys])\n    });\n    // console.log(foodFormData);\n    // add food api call\n    this.fApiService.addNewFood(foodFormData).subscribe({\n      next:((res:any)=>{\n        console.log(res);\n        alert(res.message);\n        // get all food\n        this.getAllFood();\n        // Form reset\n        this.myFood.reset();\n      }),\n      error:((error)=>{\n        console.log(error);\n      })\n    });\n  }\n//set value myFood\n  myFoodSet(f:any){\n    console.log(f);\n    this.foodObject=f;\n    // now setting up the value into myfood form\n    this.myFood.get('food_name')?.setValue(this.foodObject.food_name);\n    this.myFood.get('food_desc')?.setValue(this.foodObject.food_desc);\n    this.myFood.get('food_price')?.setValue(this.foodObject.food_price);\n    \n  }\n  // update food item\n  update(){\n    let foodFormData=new FormData();\n    let formData=this.myFood.value;\n    // foodFormData.append('food_name',this.myFood.get('food_name')?.value);\n    // foodFormData.append('food_desc',this.myFood.get('food_desc')?.value);\n    // foodFormData.append('food_price',this.myFood.get('food_price')?.value);\n    // foodFormData.append('food_image',this.myFood.get('food_image')?.value);\n    Object.keys(formData).forEach((keys:any)=>{\n      foodFormData.append(keys,formData[keys])\n    });\n    // console.log(foodFormData);\n    // update api call\n    this.fApiService.updateFood(this.foodObject._id,foodFormData).subscribe({\n      next:((res:any)=>{\n        console.log(res);\n        // get call food items\n        this.getAllFood();\n        // form reset\n        this.myFood.reset();\n        alert(res.message);\n      }),\n      error:((error)=>{\n        console.log(error);\n      })\n    })\n  }\n  // delete\n  delete(_id:any){\n    console.log(_id);\n    var conMsg=confirm('Want to delete item?');\n    console.log(conMsg);\n    if(conMsg){\n     // delete api \n    this.fApiService.deleteFood(_id).subscribe({\n      next:((res:any)=>{\n        console.log(res);\n        alert(res.message);\n        // get all food\n        this.getAllFood();\n      }),\n      error:((error)=>{\n        console.log(error);\n      })\n      \n    })\n    }\n    \n     \n  \n }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}