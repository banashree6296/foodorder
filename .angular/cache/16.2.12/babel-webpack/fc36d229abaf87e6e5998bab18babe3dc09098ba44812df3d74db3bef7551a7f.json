{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/core/services/food/food-api.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction AdminComponent_ng_container_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function AdminComponent_ng_container_10_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.logout());\n    });\n    i0.ɵɵtext(2, \"Logout\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction AdminComponent_tr_29_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵelement(10, \"img\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\")(12, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function AdminComponent_tr_29_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const f_r7 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.myFoodSet(f_r7));\n    });\n    i0.ɵɵtext(13, \"Update\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function AdminComponent_tr_29_Template_button_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const f_r7 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.delete(f_r7._id));\n    });\n    i0.ɵɵtext(15, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const f_r7 = ctx.$implicit;\n    const i_r8 = ctx.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r8 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(f_r7.food_name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(f_r7.food_desc);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(f_r7.food_price);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", f_r7.food_image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", f_r7.food_name);\n    i0.ɵɵpropertyInterpolate(\"title\", f_r7.food_name);\n  }\n}\nfunction AdminComponent_ng_container_60_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function AdminComponent_ng_container_60_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.update());\n    });\n    i0.ɵɵtext(2, \"Update\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction AdminComponent_ng_template_61_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function AdminComponent_ng_template_61_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.addFood());\n    });\n    i0.ɵɵtext(1, \"Add food\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let AdminComponent = /*#__PURE__*/(() => {\n  class AdminComponent {\n    constructor(fApiService, fBuilder, Route) {\n      this.fApiService = fApiService;\n      this.fBuilder = fBuilder;\n      this.Route = Route;\n      this.foodItems = [];\n      this.foodObject = [];\n      this.activeUser = '';\n      this.myFood = this.fBuilder.group({\n        food_name: [''],\n        food_desc: [''],\n        food_price: [''],\n        food_image: []\n      });\n    }\n    ngOnInit() {\n      //call get all foods items\n      this.getAllFood();\n      // get local storage info\n      this.getLocalstorageData();\n    }\n    getLocalstorageData() {\n      this.activeUser = localStorage.getItem('activeUser');\n    }\n    logout() {\n      alert(`${this.activeUser} You have successfully logout`);\n      // user info will remove from localstorage\n      localStorage.clear();\n      // redirect to login\n      this.Route.navigateByUrl('/login');\n    }\n    ngAfterViewInit() {}\n    // set image file\n    setFile(Event) {\n      let file = Event.target.files[0];\n      console.log(file);\n      // set file into myfood\n      this.myFood.get('food_image')?.setValue(file);\n    }\n    // get all foods items\n    getAllFood() {\n      this.fApiService.getAllFoods().subscribe({\n        next: res => {\n          // console.log(res);\n          this.foodItems = res;\n          console.log(this.foodItems);\n        },\n        error: error => {\n          console.log(error);\n        }\n      });\n    }\n    // add new food Items\n    addFood() {\n      // console.log(this.myFood.value);\n      let foodFormData = new FormData();\n      let formData = this.myFood.value;\n      // foodFormData.append('food_name',this.myFood.get('food_name')?.value);\n      // foodFormData.append('food_desc',this.myFood.get('food_desc')?.value);\n      // foodFormData.append('food_price',this.myFood.get('food_price')?.value);\n      // foodFormData.append('food_image',this.myFood.get('food_image')?.value);\n      Object.keys(formData).forEach(keys => {\n        foodFormData.append(keys, formData[keys]);\n      });\n      // console.log(foodFormData);\n      // add food api call\n      this.fApiService.addNewFood(foodFormData).subscribe({\n        next: res => {\n          console.log(res);\n          alert(res.message);\n          // get all food\n          this.getAllFood();\n          // Form reset\n          this.myFood.reset();\n        },\n        error: error => {\n          console.log(error);\n        }\n      });\n    }\n    //set value myFood\n    myFoodSet(f) {\n      console.log(f);\n      this.foodObject = f;\n      // now setting up the value into myfood form\n      this.myFood.get('food_name')?.setValue(this.foodObject.food_name);\n      this.myFood.get('food_desc')?.setValue(this.foodObject.food_desc);\n      this.myFood.get('food_price')?.setValue(this.foodObject.food_price);\n    }\n    // update food item\n    update() {\n      let foodFormData = new FormData();\n      let formData = this.myFood.value;\n      // foodFormData.append('food_name',this.myFood.get('food_name')?.value);\n      // foodFormData.append('food_desc',this.myFood.get('food_desc')?.value);\n      // foodFormData.append('food_price',this.myFood.get('food_price')?.value);\n      // foodFormData.append('food_image',this.myFood.get('food_image')?.value);\n      Object.keys(formData).forEach(keys => {\n        foodFormData.append(keys, formData[keys]);\n      });\n      // console.log(foodFormData);\n      // update api call\n      this.fApiService.updateFood(this.foodObject._id, foodFormData).subscribe({\n        next: res => {\n          console.log(res);\n          // get call food items\n          this.getAllFood();\n          // form reset\n          this.myFood.reset();\n          alert(res.message);\n        },\n        error: error => {\n          console.log(error);\n        }\n      });\n    }\n    // delete\n    delete(_id) {\n      console.log(_id);\n      var conMsg = confirm('Want to delete item?');\n      console.log(conMsg);\n      if (conMsg) {\n        // delete api \n        this.fApiService.deleteFood(_id).subscribe({\n          next: res => {\n            console.log(res);\n            alert(res.message);\n            // get all food\n            this.getAllFood();\n          },\n          error: error => {\n            console.log(error);\n          }\n        });\n      }\n    }\n    static #_ = this.ɵfac = function AdminComponent_Factory(t) {\n      return new (t || AdminComponent)(i0.ɵɵdirectiveInject(i1.FoodApiService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.Router));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AdminComponent,\n      selectors: [[\"app-admin\"]],\n      decls: 63,\n      vars: 6,\n      consts: [[1, \"jumbotron\", \"text-center\"], [1, \"container-fluid\"], [4, \"ngIf\"], [\"data-toggle\", \"modal\", \"data-target\", \"#exampleModal\", 1, \"btn\", \"btn-sm\", \"btn-success\", \"float-right\"], [1, \"table\", \"table-hover\"], [4, \"ngFor\", \"ngForOf\"], [\"id\", \"exampleModal\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"exampleModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [\"role\", \"document\", 1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"exampleModalLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"close\"], [\"aria-hidden\", \"true\"], [1, \"modal-body\"], [3, \"formGroup\"], [1, \"form-group\"], [\"type\", \"text\", \"formControlName\", \"food_name\", 1, \"form-control\"], [\"rows\", \"10\", \"cols\", \"20\", \"formControlName\", \"food_desc\", 1, \"form-control\"], [\"type\", \"number\", \"formControlName\", \"food_price\", 1, \"form-control\"], [\"type\", \"file\", 1, \"form-control\", 3, \"change\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\"], [4, \"ngIf\", \"ngIfElse\"], [\"AddButton\", \"\"], [1, \"btn\", \"btn-sm\", \"btn-danger\", \"float-right\", 3, \"click\"], [\"width\", \"68px\", \"height\", \"68px\", 3, \"src\", \"alt\", \"title\"], [\"data-toggle\", \"modal\", \"data-target\", \"#exampleModal\", 1, \"btn\", \"btn-sm\", \"btn-outline-warning\", 3, \"click\"], [1, \"btn\", \"btn-sm\", \"btn-outline-danger\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-info\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", 3, \"click\"]],\n      template: function AdminComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"header\", 0)(1, \"h5\");\n          i0.ɵɵtext(2, \"Admin Can Perform all the operations\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(3, \"div\", 1)(4, \"h2\");\n          i0.ɵɵtext(5, \"Food related operations...\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"p\");\n          i0.ɵɵtext(7, \"Admin can add new food,update,delete,view all foods items \");\n          i0.ɵɵelementStart(8, \"code\");\n          i0.ɵɵtext(9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(10, AdminComponent_ng_container_10_Template, 3, 0, \"ng-container\", 2);\n          i0.ɵɵelementStart(11, \"button\", 3);\n          i0.ɵɵtext(12, \"Add new food\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(13, \"table\", 4)(14, \"thead\")(15, \"tr\")(16, \"th\");\n          i0.ɵɵtext(17, \"Sl No\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"th\");\n          i0.ɵɵtext(19, \"Food\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"th\");\n          i0.ɵɵtext(21, \"Desc\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(22, \"th\");\n          i0.ɵɵtext(23, \"Price\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"th\");\n          i0.ɵɵtext(25, \"Image\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(26, \"th\");\n          i0.ɵɵtext(27, \"Action\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(28, \"tbody\");\n          i0.ɵɵtemplate(29, AdminComponent_tr_29_Template, 16, 7, \"tr\", 5);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(30, \"div\", 6)(31, \"div\", 7)(32, \"div\", 8)(33, \"div\", 9)(34, \"h5\", 10);\n          i0.ɵɵtext(35, \"Food operations\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(36, \"button\", 11)(37, \"span\", 12);\n          i0.ɵɵtext(38, \"\\u00D7\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(39, \"div\", 13)(40, \"form\", 14)(41, \"div\", 15)(42, \"label\");\n          i0.ɵɵtext(43, \"Food:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(44, \"input\", 16);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(45, \"div\", 15)(46, \"label\");\n          i0.ɵɵtext(47, \"Desc:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(48, \"textarea\", 17);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(49, \"div\", 15)(50, \"label\");\n          i0.ɵɵtext(51, \"Price:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(52, \"input\", 18);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(53, \"div\", 15)(54, \"label\");\n          i0.ɵɵtext(55, \"Image:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(56, \"input\", 19);\n          i0.ɵɵlistener(\"change\", function AdminComponent_Template_input_change_56_listener($event) {\n            return ctx.setFile($event);\n          });\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(57, \"div\", 20)(58, \"button\", 21);\n          i0.ɵɵtext(59, \"Close\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(60, AdminComponent_ng_container_60_Template, 3, 0, \"ng-container\", 22);\n          i0.ɵɵtemplate(61, AdminComponent_ng_template_61_Template, 2, 0, \"ng-template\", null, 23, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          const _r3 = i0.ɵɵreference(62);\n          i0.ɵɵadvance(9);\n          i0.ɵɵtextInterpolate1(\"Active user:\", ctx.activeUser, \"\");\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.activeUser);\n          i0.ɵɵadvance(19);\n          i0.ɵɵproperty(\"ngForOf\", ctx.foodItems);\n          i0.ɵɵadvance(11);\n          i0.ɵɵproperty(\"formGroup\", ctx.myFood);\n          i0.ɵɵadvance(20);\n          i0.ɵɵproperty(\"ngIf\", ctx.foodObject != 0)(\"ngIfElse\", _r3);\n        }\n      },\n      dependencies: [i4.NgForOf, i4.NgIf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NumberValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName]\n    });\n  }\n  return AdminComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}